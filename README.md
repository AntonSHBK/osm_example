# OSM –°–µ—Ä–≤–∏—Å: –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ü–æ–∏—Å–∫ –∏ –ú–∞—Ä—à—Ä—É—Ç—ã

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ FastAPI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –≥–µ–æ–¥–∞–Ω–Ω—ã–º–∏:

- –ü—Ä—è–º–æ–µ –∏ –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ **Nominatim**
- –ü–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∑–∞–¥–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ —á–µ—Ä–µ–∑ **Overpass API**
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é **OSRM**
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ (Leaflet + Folium)**

<img src="docs/window_map.jpg" alt="Project Logo" width="1200"/>  

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/AntonSHBK/osm_example.git
cd osm_example
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker-compose up --build
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ [http://127.0.0.1:8000/](http://127.0.0.1:8000/)

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [**Swagger UI**](http://127.0.0.1:8000/docs), –∫–æ—Ç–æ—Ä—ã–π –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –∞–¥—Ä–µ—Å—É:

```bash
http://127.0.0.1:8000/docs
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
osm-service/
‚îú‚îÄ‚îÄ app/                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ routers/            # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ services/           # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API
‚îÇ   ‚îú‚îÄ‚îÄ models/             # Pydantic-–º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ static/             # JS/CSS
‚îÇ   ‚îú‚îÄ‚îÄ templates/          # HTML-—à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils/              # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤—Å–ø–æ–º. —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ data/                   # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ / GeoJSON (–ø–æ–∫–∞ —Ç–∞–º –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)
‚îú‚îÄ‚îÄ notebooks/              # –¢–µ—Å—Ç—ã –∏ –ø—Ä–∏–º–µ—Ä—ã (–ø–æ–∫–∞ —Ç–∞–º –Ω–∏—á–µ–≥–æ –Ω–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)
‚îú‚îÄ‚îÄ docker/                 # Dockerfile –∏ docker-compose.yml
‚îî‚îÄ‚îÄ README.md
```

---

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API

| API          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                     | –ë–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤ |
|--------------|--------------------------------|-------------|
| Nominatim    | –ü—Ä—è–º–æ–µ –∏ –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ          |
| Overpass API | –ü–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —Ç–µ–≥–∞–º        | ‚úÖ          |
| OSRM         | –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞            | ‚úÖ          |

---

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîπ 1. –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∞–¥—Ä–µ—Å ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)

```http
GET /geocode?q=–ú–æ—Å–∫–≤–∞, –ö—Ä–µ–º–ª—å
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

```json
{
  "lat": "55.752023",
  "lon": "37.617499",
  "display_name": "–ú–æ—Å–∫–≤–∞, –ö—Ä–µ–º–ª—å, –†–æ—Å—Å–∏—è"
}
```

---

### üîπ 2. –û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí –∞–¥—Ä–µ—Å)

```http
GET /reverse-geocode?lat=55.75&lon=37.61
```

---

### üîπ 3. –ü–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ bbox

```http
GET /search?bbox=36.55,50.62,36.63,50.57&tag=school
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `bbox` ‚Äî `left,top,right,bottom`
- `tag` ‚Äî Overpass-—Ç–µ–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä `school`, `park`, `hospital`)

---

### üîπ 4. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º

```http
GET /map?from_lat=50.63&from_lon=36.56&to_lat=50.64&to_lon=36.57&mode=car
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—Ç–æ–π, —Ç–æ—á–∫–∞–º–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–æ–º.

---

### üîπ 5. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ –∫–ª–∏–∫—É / –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º

```http
GET /map/interactive-data?from_lat=...&from_lon=...&to_lat=...&to_lon=...&mode=foot
```

---

### üîπ 6. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º

```http
GET /map/from-names?from=–ë–µ–ª–≥–æ—Ä–æ–¥, –≤–æ–∫–∑–∞–ª&to=–ë–µ–ª–ì–£&mode=car
```

---

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è UI

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://127.0.0.1:8000/
```

–¢–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã:

- –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∞–¥—Ä–µ—Å ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
- –û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ —Ç—Ä–µ–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
  1. üñ± –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–µ
  2. ‚å®Ô∏è –í–≤–æ–¥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
  3. üîç –í–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–π –æ–±—ä–µ–∫—Ç–æ–≤  
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ (Leaflet)

---

## üß∞ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –±–µ–∑ Docker)

- Python 3.11+
- `pip install -r requirements.txt`
- –ó–∞–ø—É—Å–∫:
  ```bash
  uvicorn app.main:app --reload
  ```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License